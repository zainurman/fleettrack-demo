<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistem Manajemen Armada - FleetTrack</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary-color: #2c3e50;
            --secondary-color: #3498db;
            --accent-color: #e74c3c;
            --light-bg: #f5f7fa;
            --card-bg: #ffffff;
            --text-primary: #2c3e50;
            --text-secondary: #7f8c8d;
            --border-color: #e0e6ed;
            --success-color: #2ecc71;
            --warning-color: #f39c12;
            --info-color: #9b59b6;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: var(--light-bg);
            color: var(--text-primary);
            height: 100vh;
            overflow: hidden;
        }

        .container {
            display: flex;
            height: 100vh;
        }

        /* Sidebar Styles */
        .sidebar {
            width: 250px;
            background-color: var(--primary-color);
            color: white;
            padding: 20px 0;
            overflow-y: auto;
            transition: all 0.3s;
        }

        .sidebar-header {
            padding: 0 20px 20px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            margin-bottom: 20px;
        }

        .sidebar-header h2 {
            font-size: 24px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .nav-menu {
            list-style: none;
        }

        .nav-item {
            padding: 12px 20px;
            display: flex;
            align-items: center;
            gap: 10px;
            cursor: pointer;
            transition: background-color 0.2s;
        }

        .nav-item:hover {
            background-color: rgba(255, 255, 255, 0.1);
        }

        .nav-item.active {
            background-color: var(--secondary-color);
            border-left: 4px solid white;
        }

        .nav-item i {
            width: 20px;
            text-align: center;
        }

        /* Main Content */
        .main-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .header {
            background-color: var(--card-bg);
            padding: 15px 20px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .header h1 {
            font-size: 24px;
            color: var(--text-primary);
        }

        .header-actions {
            display: flex;
            gap: 15px;
            align-items: center;
        }

        .notification-btn {
            position: relative;
            background: none;
            border: none;
            font-size: 20px;
            color: var(--text-secondary);
            cursor: pointer;
        }

        .notification-badge {
            position: absolute;
            top: -5px;
            right: -5px;
            background-color: var(--accent-color);
            color: white;
            font-size: 10px;
            width: 18px;
            height: 18px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .user-profile {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 5px 10px;
            border-radius: 20px;
            background-color: var(--light-bg);
            cursor: pointer;
        }

        .user-avatar {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background-color: var(--secondary-color);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
        }

        .page-content {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
            display: none;
        }

        .page-content.active {
            display: block;
        }

        /* Common Components */
        .btn {
            padding: 8px 15px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            display: inline-flex;
            align-items: center;
            gap: 5px;
            transition: all 0.2s;
        }

        .btn-primary {
            background-color: var(--secondary-color);
            color: white;
        }

        .btn-primary:hover {
            background-color: #2980b9;
        }

        .btn-secondary {
            background-color: var(--light-bg);
            color: var(--text-primary);
        }

        .btn-secondary:hover {
            background-color: #e0e6ed;
        }

        .btn-success {
            background-color: var(--success-color);
            color: white;
        }

        .btn-danger {
            background-color: var(--accent-color);
            color: white;
        }

        .btn-sm {
            padding: 5px 10px;
            font-size: 12px;
        }

        /* Dashboard Styles */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background-color: var(--card-bg);
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .stat-icon {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
        }

        .stat-icon.blue {
            background-color: rgba(52, 152, 219, 0.1);
            color: var(--secondary-color);
        }

        .stat-icon.green {
            background-color: rgba(46, 204, 113, 0.1);
            color: var(--success-color);
        }

        .stat-icon.orange {
            background-color: rgba(243, 156, 18, 0.1);
            color: var(--warning-color);
        }

        .stat-icon.red {
            background-color: rgba(231, 76, 60, 0.1);
            color: var(--accent-color);
        }

        .stat-info h3 {
            font-size: 14px;
            color: var(--text-secondary);
            margin-bottom: 5px;
        }

        .stat-value {
            font-size: 28px;
            font-weight: 600;
        }

        .stat-change {
            font-size: 12px;
            margin-top: 5px;
        }

        .stat-change.positive {
            color: var(--success-color);
        }

        .stat-change.negative {
            color: var(--accent-color);
        }

        .dashboard-grid {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 20px;
        }

        .chart-container {
            background-color: var(--card-bg);
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
        }

        .chart-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .chart-header h3 {
            font-size: 18px;
        }

        .activity-list {
            background-color: var(--card-bg);
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
        }

        .activity-item {
            display: flex;
            gap: 15px;
            padding: 15px 0;
            border-bottom: 1px solid var(--border-color);
        }

        .activity-item:last-child {
            border-bottom: none;
        }

        .activity-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }

        .activity-content {
            flex: 1;
        }

        .activity-title {
            font-weight: 500;
            margin-bottom: 5px;
        }

        .activity-time {
            font-size: 12px;
            color: var(--text-secondary);
        }

        /* Performance Grid Styles - NEW */
        .performance-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-top: 20px;
        }

        .performance-item {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 15px;
            background-color: var(--light-bg);
            border-radius: 8px;
            transition: transform 0.2s;
        }

        .performance-item:hover {
            transform: translateY(-2px);
        }

        .performance-icon {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            flex-shrink: 0;
        }

        .performance-info {
            flex: 1;
        }

        .performance-value {
            font-size: 24px;
            font-weight: 600;
            margin-bottom: 5px;
        }

        .performance-label {
            font-size: 14px;
            color: var(--text-secondary);
            margin-bottom: 5px;
        }

        .performance-change {
            font-size: 12px;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .performance-change.positive {
            color: var(--success-color);
        }

        .performance-change.negative {
            color: var(--accent-color);
        }

        /* Tracking Page Styles */
        .content-wrapper {
            display: flex;
            gap: 20px;
            height: calc(100vh - 120px);
        }

        .truck-list {
            width: 40%;
            background-color: var(--card-bg);
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
        }

        .search-bar {
            padding: 15px;
            border-bottom: 1px solid var(--border-color);
        }

        .search-input {
            width: 100%;
            padding: 10px 15px;
            border: 1px solid var(--border-color);
            border-radius: 4px;
            font-size: 14px;
        }

        .truck-list-container {
            overflow-y: auto;
            max-height: calc(100% - 60px);
        }

        .truck-item {
            padding: 15px;
            border-bottom: 1px solid var(--border-color);
            cursor: pointer;
            transition: background-color 0.2s;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .truck-item:hover {
            background-color: var(--light-bg);
        }

        .truck-item.active {
            background-color: rgba(52, 152, 219, 0.1);
            border-left: 3px solid var(--secondary-color);
        }

        .truck-info h3 {
            font-size: 16px;
            margin-bottom: 5px;
        }

        .truck-details {
            display: flex;
            gap: 15px;
            font-size: 13px;
            color: var(--text-secondary);
        }

        .truck-status {
            display: flex;
            flex-direction: column;
            align-items: flex-end;
        }

        .status-badge {
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 500;
            margin-bottom: 5px;
        }

        .status-active {
            background-color: rgba(46, 204, 113, 0.2);
            color: var(--success-color);
        }

        .status-idle {
            background-color: rgba(243, 156, 18, 0.2);
            color: var(--warning-color);
        }

        .status-offline {
            background-color: rgba(231, 76, 60, 0.2);
            color: var(--accent-color);
        }

        .capacity-indicator {
            width: 100px;
            height: 6px;
            background-color: var(--border-color);
            border-radius: 3px;
            overflow: hidden;
        }

        .capacity-bar {
            height: 100%;
            background-color: var(--secondary-color);
        }

        .truck-details-panel {
            flex: 1;
            background-color: var(--card-bg);
            border-radius: 8px;
            padding: 20px;
            overflow-y: auto;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
        }

        .detail-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid var(--border-color);
        }

        .detail-header h2 {
            font-size: 20px;
        }

        .detail-actions {
            display: flex;
            gap: 10px;
        }

        .detail-tabs {
            display: flex;
            margin-bottom: 20px;
            border-bottom: 1px solid var(--border-color);
        }

        .tab {
            padding: 10px 15px;
            cursor: pointer;
            border-bottom: 2px solid transparent;
            margin-right: 10px;
            font-weight: 500;
            color: var(--text-secondary);
        }

        .tab.active {
            color: var(--secondary-color);
            border-bottom-color: var(--secondary-color);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .info-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            margin-bottom: 20px;
        }

        .info-card {
            background-color: var(--light-bg);
            padding: 15px;
            border-radius: 8px;
        }

        .info-card h3 {
            font-size: 14px;
            color: var(--text-secondary);
            margin-bottom: 10px;
        }

        .info-value {
            font-size: 24px;
            font-weight: 600;
        }

        .map-container {
            height: 300px;
            border-radius: 8px;
            overflow: hidden;
            margin-bottom: 20px;
        }

        /* Route Stepper Styles */
        .route-stepper {
            background-color: var(--card-bg);
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
        }

        .stepper-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .stepper-header h3 {
            font-size: 18px;
            color: var(--text-primary);
        }

        .stepper-progress {
            font-size: 14px;
            color: var(--text-secondary);
        }

        .stepper-container {
            position: relative;
            padding: 20px 0;
        }

        .stepper-line {
            position: absolute;
            top: 35px;
            left: 35px;
            right: 35px;
            height: 3px;
            background-color: var(--border-color);
            z-index: 1;
        }

        .stepper-line-progress {
            position: absolute;
            top: 0;
            left: 0;
            height: 100%;
            background-color: var(--success-color);
            transition: width 0.5s ease;
            z-index: 2;
        }

        .stepper-steps {
            display: flex;
            justify-content: space-between;
            position: relative;
            z-index: 3;
        }

        .step {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            flex: 1;
            position: relative;
        }

        .step-icon {
            width: 70px;
            height: 70px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            margin-bottom: 10px;
            transition: all 0.3s ease;
            cursor: pointer;
            position: relative;
        }

        .step-icon.completed {
            background-color: rgba(46, 204, 113, 0.1);
            color: var(--success-color);
            border: 3px solid var(--success-color);
        }

        .step-icon.current {
            background-color: rgba(52, 152, 219, 0.1);
            color: var(--secondary-color);
            border: 3px solid var(--secondary-color);
            animation: pulse 2s infinite;
        }

        .step-icon.upcoming {
            background-color: var(--light-bg);
            color: var(--text-secondary);
            border: 3px solid var(--border-color);
        }

        @keyframes pulse {
            0% {
                box-shadow: 0 0 0 0 rgba(52, 152, 219, 0.4);
            }
            70% {
                box-shadow: 0 0 0 10px rgba(52, 152, 219, 0);
            }
            100% {
                box-shadow: 0 0 0 0 rgba(52, 152, 219, 0);
            }
        }

        .step-title {
            font-weight: 600;
            font-size: 14px;
            margin-bottom: 5px;
            color: var(--text-primary);
        }

        .step-subtitle {
            font-size: 12px;
            color: var(--text-secondary);
            margin-bottom: 5px;
        }

        .step-time {
            font-size: 11px;
            color: var(--text-secondary);
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .step-details {
            margin-top: 8px;
            padding: 8px;
            background-color: var(--light-bg);
            border-radius: 4px;
            font-size: 11px;
            color: var(--text-secondary);
            max-width: 150px;
        }

        .cargo-photos {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
        }

        .photo-card {
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            cursor: pointer;
            transition: transform 0.2s;
        }

        .photo-card:hover {
            transform: translateY(-5px);
        }

        .photo-card img {
            width: 100%;
            height: 150px;
            object-fit: cover;
        }

        .photo-info {
            padding: 10px;
            background-color: white;
        }

        .photo-date {
            font-size: 12px;
            color: var(--text-secondary);
        }

        .photo-location {
            font-size: 14px;
            margin-top: 5px;
        }

        /* Vehicles Page Styles */
        .vehicles-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .filter-bar {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }

        .filter-select {
            padding: 8px 12px;
            border: 1px solid var(--border-color);
            border-radius: 4px;
            background-color: white;
        }

        .vehicles-table {
            background-color: var(--card-bg);
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
        }

        .table {
            width: 100%;
            border-collapse: collapse;
        }

        .table th {
            background-color: var(--light-bg);
            padding: 12px 15px;
            text-align: left;
            font-weight: 600;
            color: var(--text-secondary);
            font-size: 14px;
        }

        .table td {
            padding: 12px 15px;
            border-top: 1px solid var(--border-color);
        }

        .table tr:hover {
            background-color: var(--light-bg);
        }

        .vehicle-actions {
            display: flex;
            gap: 5px;
        }

        /* Drivers Page Styles */
        .drivers-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
        }

        .driver-card {
            background-color: var(--card-bg);
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
            transition: transform 0.2s;
        }

        .driver-card:hover {
            transform: translateY(-5px);
        }

        .driver-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 15px;
        }

        .driver-avatar {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background-color: var(--secondary-color);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 24px;
        }

        .driver-info h3 {
            font-size: 18px;
            margin-bottom: 5px;
        }

        .driver-info p {
            color: var(--text-secondary);
            font-size: 14px;
        }

        .driver-stats {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin-bottom: 15px;
        }

        .driver-stat {
            background-color: var(--light-bg);
            padding: 10px;
            border-radius: 4px;
            text-align: center;
        }

        .driver-stat-value {
            font-size: 20px;
            font-weight: 600;
        }

        .driver-stat-label {
            font-size: 12px;
            color: var(--text-secondary);
        }

        .driver-actions {
            display: flex;
            gap: 10px;
        }

        /* Routes Page Styles */
        .routes-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        .route-planner {
            background-color: var(--card-bg);
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
        }

        .route-form {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin-bottom: 20px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }

        .form-group label {
            font-weight: 500;
            font-size: 14px;
        }

        .form-control {
            padding: 10px;
            border: 1px solid var(--border-color);
            border-radius: 4px;
            font-size: 14px;
        }

        .route-list {
            background-color: var(--card-bg);
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
        }

        .route-item {
            padding: 15px;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .route-item:last-child {
            border-bottom: none;
        }

        .route-info h4 {
            margin-bottom: 5px;
        }

        .route-details {
            font-size: 14px;
            color: var(--text-secondary);
        }

        /* Reports Page Styles */
        .reports-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .date-range-selector {
            display: flex;
            gap: 10px;
            align-items: center;
        }

        .reports-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 20px;
        }

        .report-card {
            background-color: var(--card-bg);
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
        }

        .report-card h3 {
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .report-table {
            width: 100%;
            font-size: 14px;
        }

        .report-table th {
            text-align: left;
            padding: 8px;
            border-bottom: 1px solid var(--border-color);
            color: var(--text-secondary);
        }

        .report-table td {
            padding: 8px;
            border-bottom: 1px solid var(--border-color);
        }

        /* Settings Page Styles */
        .settings-container {
            display: grid;
            grid-template-columns: 250px 1fr;
            gap: 20px;
        }

        .settings-sidebar {
            background-color: var(--card-bg);
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
        }

        .settings-nav {
            list-style: none;
        }

        .settings-nav-item {
            padding: 10px 15px;
            margin-bottom: 5px;
            border-radius: 4px;
            cursor: pointer;
            transition: background-color 0.2s;
        }

        .settings-nav-item:hover {
            background-color: var(--light-bg);
        }

        .settings-nav-item.active {
            background-color: var(--secondary-color);
            color: white;
        }

        .settings-content {
            background-color: var(--card-bg);
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
        }

        .settings-section {
            display: none;
        }

        .settings-section.active {
            display: block;
        }

        .settings-section h3 {
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 1px solid var(--border-color);
        }

        .settings-form {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .toggle-switch {
            position: relative;
            width: 50px;
            height: 24px;
            background-color: var(--border-color);
            border-radius: 12px;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .toggle-switch.active {
            background-color: var(--secondary-color);
        }

        .toggle-slider {
            position: absolute;
            top: 2px;
            left: 2px;
            width: 20px;
            height: 20px;
            background-color: white;
            border-radius: 50%;
            transition: transform 0.3s;
        }

        .toggle-switch.active .toggle-slider {
            transform: translateX(26px);
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }

        .modal-content {
            background-color: white;
            width: 90%;
            max-width: 500px;
            border-radius: 8px;
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }

        .modal-header {
            padding: 15px 20px;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-close {
            background: none;
            border: none;
            font-size: 20px;
            cursor: pointer;
            color: var(--text-secondary);
        }

        .modal-body {
            padding: 20px;
        }

        /* Toast Notification */
        .toast {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background-color: var(--primary-color);
            color: white;
            padding: 15px 20px;
            border-radius: 4px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            display: flex;
            align-items: center;
            gap: 10px;
            transform: translateY(100px);
            opacity: 0;
            transition: all 0.3s;
            z-index: 1000;
        }

        .toast.show {
            transform: translateY(0);
            opacity: 1;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .sidebar {
                width: 60px;
            }

            .sidebar-header h2 span,
            .nav-item span {
                display: none;
            }

            .stats-grid {
                grid-template-columns: 1fr;
            }

            .dashboard-grid {
                grid-template-columns: 1fr;
            }

            .content-wrapper {
                flex-direction: column;
            }

            .truck-list {
                width: 100%;
                max-height: 300px;
            }

            .info-grid {
                grid-template-columns: 1fr;
            }

            .routes-container {
                grid-template-columns: 1fr;
            }

            .settings-container {
                grid-template-columns: 1fr;
            }

            .stepper-steps {
                flex-direction: column;
                gap: 30px;
            }

            .stepper-line {
                width: 3px;
                height: calc(100% - 70px);
                top: 35px;
                left: 35px;
                right: auto;
            }

            .step {
                flex-direction: row;
                text-align: left;
                justify-content: flex-start;
                gap: 20px;
            }

            .performance-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Sidebar -->
        <div class="sidebar">
            <div class="sidebar-header">
                <h2><i class="fas fa-truck"></i> <span>FleetTrack</span></h2>
            </div>
            <ul class="nav-menu">
                <li class="nav-item" data-page="dashboard">
                    <i class="fas fa-tachometer-alt"></i>
                    <span>Dashboard</span>
                </li>
                <li class="nav-item active" data-page="tracking">
                    <i class="fas fa-map-marked-alt"></i>
                    <span>Tracking</span>
                </li>
                <li class="nav-item" data-page="vehicles">
                    <i class="fas fa-truck-loading"></i>
                    <span>Kendaraan</span>
                </li>
                <li class="nav-item" data-page="drivers">
                    <i class="fas fa-user-tie"></i>
                    <span>Pengemudi</span>
                </li>
                <li class="nav-item" data-page="routes">
                    <i class="fas fa-route"></i>
                    <span>Rute</span>
                </li>
                <li class="nav-item" data-page="reports">
                    <i class="fas fa-chart-bar"></i>
                    <span>Laporan</span>
                </li>
                <li class="nav-item" data-page="settings">
                    <i class="fas fa-cog"></i>
                    <span>Pengaturan</span>
                </li>
            </ul>
        </div>

        <!-- Main Content -->
        <div class="main-content">
            <div class="header">
                <h1 id="page-title">Tracking Kendaraan</h1>
                <div class="header-actions">
                    <button class="notification-btn" onclick="showNotifications()">
                        <i class="fas fa-bell"></i>
                        <span class="notification-badge">3</span>
                    </button>
                    <div class="user-profile" onclick="showUserMenu()">
                        <div class="user-avatar">AD</div>
                        <span>Admin</span>
                        <i class="fas fa-chevron-down"></i>
                    </div>
                </div>
            </div>

            <!-- Dashboard Page -->
            <div class="page-content" id="dashboard-page">
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon blue">
                            <i class="fas fa-truck"></i>
                        </div>
                        <div class="stat-info">
                            <h3>Total Kendaraan</h3>
                            <div class="stat-value">24</div>
                            <div class="stat-change positive">
                                <i class="fas fa-arrow-up"></i> 2 dari bulan lalu
                            </div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon green">
                            <i class="fas fa-route"></i>
                        </div>
                        <div class="stat-info">
                            <h3>Perjalanan Aktif</h3>
                            <div class="stat-value">18</div>
                            <div class="stat-change positive">
                                <i class="fas fa-arrow-up"></i> 75% efisiensi
                            </div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon orange">
                            <i class="fas fa-users"></i>
                        </div>
                        <div class="stat-info">
                            <h3>Pengemudi</h3>
                            <div class="stat-value">32</div>
                            <div class="stat-change positive">
                                <i class="fas fa-arrow-up"></i> 4 baru
                            </div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon red">
                            <i class="fas fa-exclamation-triangle"></i>
                        </div>
                        <div class="stat-info">
                            <h3>Peringatan</h3>
                            <div class="stat-value">3</div>
                            <div class="stat-change negative">
                                <i class="fas fa-arrow-up"></i> Perlu perhatian
                            </div>
                        </div>
                    </div>
                </div>

                <div class="dashboard-grid">
                    <div class="chart-container">
                        <div class="chart-header">
                            <h3>Informasi Kinerja Operasional</h3>
                            <select class="filter-select" onchange="updatePerformanceData(this.value)">
                                <option value="today">Hari Ini</option>
                                <option value="week">Minggu Ini</option>
                                <option value="month">Bulan Ini</option>
                            </select>
                        </div>
                        <div class="performance-grid" id="performance-data">
                            <div class="performance-item">
                                <div class="performance-icon" style="background-color: rgba(46, 204, 113, 0.1); color: var(--success-color);">
                                    <i class="fas fa-check-circle"></i>
                                </div>
                                <div class="performance-info">
                                    <div class="performance-value">92%</div>
                                    <div class="performance-label">Tingkat Keberhasilan</div>
                                    <div class="performance-change positive">
                                        <i class="fas fa-arrow-up"></i> 5% dari kemarin
                                    </div>
                                </div>
                            </div>
                            <div class="performance-item">
                                <div class="performance-icon" style="background-color: rgba(52, 152, 219, 0.1); color: var(--secondary-color);">
                                    <i class="fas fa-clock"></i>
                                </div>
                                <div class="performance-info">
                                    <div class="performance-value">4.2 jam</div>
                                    <div class="performance-label">Rata-rata Waktu Tempuh</div>
                                    <div class="performance-change positive">
                                        <i class="fas fa-arrow-down"></i> 15 menit lebih cepat
                                    </div>
                                </div>
                            </div>
                            <div class="performance-item">
                                <div class="performance-icon" style="background-color: rgba(243, 156, 18, 0.1); color: var(--warning-color);">
                                    <i class="fas fa-gas-pump"></i>
                                </div>
                                <div class="performance-info">
                                    <div class="performance-value">8.5 L/100km</div>
                                    <div class="performance-label">Konsumsi BBM</div>
                                    <div class="performance-change positive">
                                        <i class="fas fa-arrow-down"></i> 0.3L lebih efisien
                                    </div>
                                </div>
                            </div>
                            <div class="performance-item">
                                <div class="performance-icon" style="background-color: rgba(155, 89, 182, 0.1); color: var(--info-color);">
                                    <i class="fas fa-users"></i>
                                </div>
                                <div class="performance-info">
                                    <div class="performance-value">4.8</div>
                                    <div class="performance-label">Rating Pelanggan</div>
                                    <div class="performance-change positive">
                                        <i class="fas fa-arrow-up"></i> 0.2 dari minggu lalu
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="activity-list">
                        <h3>Aktivitas Terkini</h3>
                        <div id="activity-list">
                            <!-- Activities will be generated by JavaScript -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- Tracking Page -->
            <div class="page-content active" id="tracking-page">
                <div class="content-wrapper">
                    <div class="truck-list">
                        <div class="search-bar">
                            <input type="text" class="search-input" placeholder="Cari kendaraan..." onkeyup="searchTrucks(this.value)">
                        </div>
                        <div class="truck-list-container" id="truck-list-container">
                            <!-- Truck items will be generated by JavaScript -->
                        </div>
                    </div>

                    <div class="truck-details-panel">
                        <div class="detail-header">
                            <h2 id="selected-truck-name">YR - 34DFR734W2</h2>
                            <div class="detail-actions">
                                <button class="btn btn-secondary" onclick="downloadReport()">
                                    <i class="fas fa-download"></i> Unduh Laporan
                                </button>
                                <button class="btn btn-primary" onclick="contactDriver()">
                                    <i class="fas fa-phone"></i> Hubungi Pengemudi
                                </button>
                            </div>
                        </div>

                        <div class="detail-tabs">
                            <div class="tab active" data-tab="overview" onclick="switchTab('overview')">Ringkasan</div>
                            <div class="tab" data-tab="route" onclick="switchTab('route')">Rute</div>
                            <div class="tab" data-tab="cargo" onclick="switchTab('cargo')">Kargo</div>
                            <div class="tab" data-tab="history" onclick="switchTab('history')">Riwayat</div>
                        </div>

                        <div class="tab-content active" id="overview">
                            <div class="info-grid">
                                <div class="info-card">
                                    <h3>Kapasitas Saat Ini</h3>
                                    <div class="info-value" id="current-capacity">82%</div>
                                </div>
                                <div class="info-card">
                                    <h3>Status</h3>
                                    <div class="info-value" id="current-status">Aktif</div>
                                </div>
                                <div class="info-card">
                                    <h3>Kecepatan</h3>
                                    <div class="info-value" id="current-speed">65 km/h</div>
                                </div>
                                <div class="info-card">
                                    <h3>Jarak Tempuh</h3>
                                    <div class="info-value" id="current-distance">245 km</div>
                                </div>
                            </div>

                            <div class="map-container" id="map"></div>

                            <!-- Route Stepper -->
                            <div class="route-stepper">
                                <div class="stepper-header">
                                    <h3>Progress Perjalanan</h3>
                                    <div class="stepper-progress">
                                        <span id="progress-text">2 dari 4 tujuan selesai</span>
                                    </div>
                                </div>
                                <div class="stepper-container">
                                    <div class="stepper-line">
                                        <div class="stepper-line-progress" id="progress-bar" style="width: 50%;"></div>
                                    </div>
                                    <div class="stepper-steps" id="stepper-steps">
                                        <!-- Steps will be generated by JavaScript -->
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="tab-content" id="route">
                            <div class="map-container" id="route-map"></div>
                            <div class="info-grid">
                                <div class="info-card">
                                    <h3>Lokasi Asal</h3>
                                    <div class="info-value">Jakarta</div>
                                </div>
                                <div class="info-card">
                                    <h3>Tujuan</h3>
                                    <div class="info-value">Surabaya</div>
                                </div>
                                <div class="info-card">
                                    <h3>Perkiraan Tiba</h3>
                                    <div class="info-value">14:30</div>
                                </div>
                                <div class="info-card">
                                    <h3>Jarak Tersisa</h3>
                                    <div class="info-value">420 km</div>
                                </div>
                            </div>
                        </div>

                        <div class="tab-content" id="cargo">
                            <h3 style="margin-bottom: 15px;">Laporan Foto Kargo</h3>
                            <div class="cargo-photos">
                                <div class="photo-card" onclick="showPhotoModal('cargo1', '12/06/2023 08:30', 'Jakarta')">
                                    <img src="https://picsum.photos/seed/cargo1/400/300.jpg" alt="Cargo Photo">
                                    <div class="photo-info">
                                        <div class="photo-date">12/06/2023 08:30</div>
                                        <div class="photo-location">Jakarta</div>
                                    </div>
                                </div>
                                <div class="photo-card" onclick="showPhotoModal('cargo2', '12/06/2023 10:15', 'Cirebon')">
                                    <img src="https://picsum.photos/seed/cargo2/400/300.jpg" alt="Cargo Photo">
                                    <div class="photo-info">
                                        <div class="photo-date">12/06/2023 10:15</div>
                                        <div class="photo-location">Cirebon</div>
                                    </div>
                                </div>
                                <div class="photo-card" onclick="showPhotoModal('cargo3', '12/06/2023 12:45', 'Semarang')">
                                    <img src="https://picsum.photos/seed/cargo3/400/300.jpg" alt="Cargo Photo">
                                    <div class="photo-info">
                                        <div class="photo-date">12/06/2023 12:45</div>
                                        <div class="photo-location">Semarang</div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="tab-content" id="history">
                            <h3 style="margin-bottom: 15px;">Riwayat Perjalanan</h3>
                            <table style="width: 100%; border-collapse: collapse;">
                                <thead>
                                    <tr style="border-bottom: 1px solid var(--border-color);">
                                        <th style="padding: 10px; text-align: left;">Tanggal</th>
                                        <th style="padding: 10px; text-align: left;">Asal</th>
                                        <th style="padding: 10px; text-align: left;">Tujuan</th>
                                        <th style="padding: 10px; text-align: left;">Status</th>
                                    </tr>
                                </thead>
                                <tbody id="history-tbody">
                                    <!-- History items will be generated by JavaScript -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Vehicles Page -->
            <div class="page-content" id="vehicles-page">
                <div class="vehicles-header">
                    <h2>Manajemen Kendaraan</h2>
                    <button class="btn btn-primary" onclick="showAddVehicleModal()">
                        <i class="fas fa-plus"></i> Tambah Kendaraan
                    </button>
                </div>

                <div class="filter-bar">
                    <select class="filter-select" id="vehicle-status-filter" onchange="filterVehicles()">
                        <option value="">Semua Status</option>
                        <option value="active">Aktif</option>
                        <option value="idle">Diam</option>
                        <option value="offline">Offline</option>
                    </select>
                    <select class="filter-select" id="vehicle-type-filter" onchange="filterVehicles()">
                        <option value="">Semua Tipe</option>
                        <option value="Truk Besar">Truk Besar</option>
                        <option value="Truk Sedang">Truk Sedang</option>
                        <option value="Van">Van</option>
                    </select>
                    <input type="text" class="form-control" placeholder="Cari kendaraan..." style="max-width: 300px;" onkeyup="filterVehicles()">
                </div>

                <div class="vehicles-table">
                    <table class="table">
                        <thead>
                            <tr>
                                <th>ID Kendaraan</th>
                                <th>Tipe</th>
                                <th>Pengemudi</th>
                                <th>Status</th>
                                <th>Kapasitas</th>
                                <th>Lokasi</th>
                                <th>Aksi</th>
                            </tr>
                        </thead>
                        <tbody id="vehicles-tbody">
                            <!-- Vehicle rows will be generated by JavaScript -->
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Drivers Page -->
            <div class="page-content" id="drivers-page">
                <div class="vehicles-header">
                    <h2>Manajemen Pengemudi</h2>
                    <button class="btn btn-primary" onclick="showAddDriverModal()">
                        <i class="fas fa-plus"></i> Tambah Pengemudi
                    </button>
                </div>

                <div class="drivers-grid" id="drivers-grid">
                    <!-- Driver cards will be generated by JavaScript -->
                </div>
            </div>

            <!-- Routes Page -->
            <div class="page-content" id="routes-page">
                <div class="vehicles-header">
                    <h2>Manajemen Rute</h2>
                    <button class="btn btn-primary" onclick="showAddRouteModal()">
                        <i class="fas fa-plus"></i> Buat Rute Baru
                    </button>
                </div>

                <div class="routes-container">
                    <div class="route-planner">
                        <h3>Perencana Rute</h3>
                        <div class="route-form">
                            <div class="form-group">
                                <label>Nama Rute</label>
                                <input type="text" class="form-control" id="route-name" placeholder="Masukkan nama rute">
                            </div>
                            <div class="form-group">
                                <label>Lokasi Asal</label>
                                <input type="text" class="form-control" id="route-origin" placeholder="Masukkan lokasi asal">
                            </div>
                            <div class="form-group">
                                <label>Lokasi Tujuan</label>
                                <input type="text" class="form-control" id="route-destination" placeholder="Masukkan lokasi tujuan">
                            </div>
                            <div class="form-group">
                                <label>Kendaraan</label>
                                <select class="form-control" id="route-vehicle">
                                    <option value="">Pilih Kendaraan</option>
                                </select>
                            </div>
                            <button class="btn btn-primary" onclick="createRoute()">
                                <i class="fas fa-route"></i> Buat Rute
                            </button>
                        </div>
                    </div>

                    <div class="route-list">
                        <h3>Rute Aktif</h3>
                        <div id="active-routes">
                            <!-- Route items will be generated by JavaScript -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- Reports Page -->
            <div class="page-content" id="reports-page">
                <div class="reports-header">
                    <h2>Laporan & Analitik</h2>
                    <div class="date-range-selector">
                        <input type="date" class="form-control" id="report-start-date">
                        <span>sampai</span>
                        <input type="date" class="form-control" id="report-end-date">
                        <button class="btn btn-primary" onclick="filterReports()">
                            <i class="fas fa-filter"></i> Filter
                        </button>
                        <button class="btn btn-secondary" onclick="exportReports()">
                            <i class="fas fa-download"></i> Export
                        </button>
                    </div>
                </div>

                <div class="reports-grid">
                    <div class="report-card">
                        <h3><i class="fas fa-chart-line"></i> Laporan Perjalanan</h3>
                        <table class="report-table">
                            <thead>
                                <tr>
                                    <th>Bulan</th>
                                    <th>Total Perjalanan</th>
                                    <th>Jarak (km)</th>
                                    <th>Effisiensi</th>
                                </tr>
                            </thead>
                            <tbody id="trip-reports-tbody">
                                <!-- Trip reports will be generated by JavaScript -->
                            </tbody>
                        </table>
                    </div>

                    <div class="report-card">
                        <h3><i class="fas fa-users"></i> Performa Pengemudi</h3>
                        <table class="report-table">
                            <thead>
                                <tr>
                                    <th>Nama</th>
                                    <th>Perjalanan</th>
                                    <th>Rating</th>
                                    <th>Status</th>
                                </tr>
                            </thead>
                            <tbody id="driver-reports-tbody">
                                <!-- Driver reports will be generated by JavaScript -->
                            </tbody>
                        </table>
                    </div>

                    <div class="report-card">
                        <h3><i class="fas fa-wrench"></i> Maintenance Kendaraan</h3>
                        <table class="report-table">
                            <thead>
                                <tr>
                                    <th>Kendaraan</th>
                                    <th>Terakhir Servis</th>
                                    <th>Km Berikutnya</th>
                                    <th>Status</th>
                                </tr>
                            </thead>
                            <tbody id="maintenance-reports-tbody">
                                <!-- Maintenance reports will be generated by JavaScript -->
                            </tbody>
                        </table>
                    </div>

                    <div class="report-card">
                        <h3><i class="fas fa-dollar-sign"></i> Laporan Keuangan</h3>
                        <table class="report-table">
                            <thead>
                                <tr>
                                    <th>Kategori</th>
                                    <th>Bulan Ini</th>
                                    <th>Bulan Lalu</th>
                                    <th>Perubahan</th>
                                </tr>
                            </thead>
                            <tbody id="finance-reports-tbody">
                                <!-- Finance reports will be generated by JavaScript -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Settings Page -->
            <div class="page-content" id="settings-page">
                <h2>Pengaturan Sistem</h2>
                <div class="settings-container">
                    <div class="settings-sidebar">
                        <ul class="settings-nav">
                            <li class="settings-nav-item active" data-section="general" onclick="switchSettingsSection('general')">Umum</li>
                            <li class="settings-nav-item" data-section="notifications" onclick="switchSettingsSection('notifications')">Notifikasi</li>
                            <li class="settings-nav-item" data-section="security" onclick="switchSettingsSection('security')">Keamanan</li>
                            <li class="settings-nav-item" data-section="integrations" onclick="switchSettingsSection('integrations')">Integrasi</li>
                            <li class="settings-nav-item" data-section="backup" onclick="switchSettingsSection('backup')">Backup</li>
                        </ul>
                    </div>

                    <div class="settings-content">
                        <div class="settings-section active" id="general">
                            <h3>Pengaturan Umum</h3>
                            <div class="settings-form">
                                <div class="form-group">
                                    <label>Nama Perusahaan</label>
                                    <input type="text" class="form-control" id="company-name" value="FleetTrack Indonesia">
                                </div>
                                <div class="form-group">
                                    <label>Email Perusahaan</label>
                                    <input type="email" class="form-control" id="company-email" value="info@fleettrack.id">
                                </div>
                                <div class="form-group">
                                    <label>Nomor Telepon</label>
                                    <input type="tel" class="form-control" id="company-phone" value="+62 21 1234 5678">
                                </div>
                                <div class="form-group">
                                    <label>Bahasa</label>
                                    <select class="form-control" id="language">
                                        <option value="id">Bahasa Indonesia</option>
                                        <option value="en">English</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label>Zona Waktu</label>
                                    <select class="form-control" id="timezone">
                                        <option value="WIB">WIB (GMT+7)</option>
                                        <option value="WITA">WITA (GMT+8)</option>
                                        <option value="WIT">WIT (GMT+9)</option>
                                    </select>
                                </div>
                                <button class="btn btn-primary" onclick="saveGeneralSettings()">Simpan Perubahan</button>
                            </div>
                        </div>

                        <div class="settings-section" id="notifications">
                            <h3>Pengaturan Notifikasi</h3>
                            <div class="settings-form">
                                <div class="form-group" style="flex-direction: row; justify-content: space-between; align-items: center;">
                                    <div>
                                        <label>Notifikasi Email</label>
                                        <p style="font-size: 12px; color: var(--text-secondary); margin-top: 5px;">Terima notifikasi melalui email</p>
                                    </div>
                                    <div class="toggle-switch active" onclick="toggleSwitch(this)">
                                        <div class="toggle-slider"></div>
                                    </div>
                                </div>
                                <div class="form-group" style="flex-direction: row; justify-content: space-between; align-items: center;">
                                    <div>
                                        <label>Notifikasi SMS</label>
                                        <p style="font-size: 12px; color: var(--text-secondary); margin-top: 5px;">Terima notifikasi melalui SMS</p>
                                    </div>
                                    <div class="toggle-switch" onclick="toggleSwitch(this)">
                                        <div class="toggle-slider"></div>
                                    </div>
                                </div>
                                <div class="form-group" style="flex-direction: row; justify-content: space-between; align-items: center;">
                                    <div>
                                        <label>Notifikasi Push</label>
                                        <p style="font-size: 12px; color: var(--text-secondary); margin-top: 5px;">Terima notifikasi push di browser</p>
                                    </div>
                                    <div class="toggle-switch active" onclick="toggleSwitch(this)">
                                        <div class="toggle-slider"></div>
                                    </div>
                                </div>
                                <div class="form-group" style="flex-direction: row; justify-content: space-between; align-items: center;">
                                    <div>
                                        <label>Laporan Harian</label>
                                        <p style="font-size: 12px; color: var(--text-secondary); margin-top: 5px;">Kirim laporan harian otomatis</p>
                                    </div>
                                    <div class="toggle-switch active" onclick="toggleSwitch(this)">
                                        <div class="toggle-slider"></div>
                                    </div>
                                </div>
                                <button class="btn btn-primary" onclick="saveNotificationSettings()">Simpan Perubahan</button>
                            </div>
                        </div>

                        <div class="settings-section" id="security">
                            <h3>Pengaturan Keamanan</h3>
                            <div class="settings-form">
                                <div class="form-group">
                                    <label>Password Saat Ini</label>
                                    <input type="password" class="form-control" id="current-password">
                                </div>
                                <div class="form-group">
                                    <label>Password Baru</label>
                                    <input type="password" class="form-control" id="new-password">
                                </div>
                                <div class="form-group">
                                    <label>Konfirmasi Password Baru</label>
                                    <input type="password" class="form-control" id="confirm-password">
                                </div>
                                <div class="form-group" style="flex-direction: row; justify-content: space-between; align-items: center;">
                                    <div>
                                        <label>Two-Factor Authentication</label>
                                        <p style="font-size: 12px; color: var(--text-secondary); margin-top: 5px;">Tambahkan lapisan keamanan ekstra</p>
                                    </div>
                                    <div class="toggle-switch" onclick="toggleSwitch(this)">
                                        <div class="toggle-slider"></div>
                                    </div>
                                </div>
                                <button class="btn btn-primary" onclick="updatePassword()">Update Password</button>
                            </div>
                        </div>

                        <div class="settings-section" id="integrations">
                            <h3>Integrasi API</h3>
                            <div class="settings-form">
                                <div class="form-group">
                                    <label>Google Maps API Key</label>
                                    <input type="text" class="form-control" id="google-maps-api" placeholder="Masukkan API Key">
                                </div>
                                <div class="form-group">
                                    <label>WhatsApp Business API</label>
                                    <input type="text" class="form-control" id="whatsapp-api" placeholder="Masukkan API Key">
                                </div>
                                <div class="form-group">
                                    <label>Payment Gateway</label>
                                    <select class="form-control" id="payment-gateway">
                                        <option value="">Pilih Payment Gateway</option>
                                        <option value="midtrans">Midtrans</option>
                                        <option value="xendit">Xendit</option>
                                        <option value="doku">DOKU</option>
                                    </select>
                                </div>
                                <button class="btn btn-primary" onclick="saveIntegrations()">Simpan Integrasi</button>
                            </div>
                        </div>

                        <div class="settings-section" id="backup">
                            <h3>Backup & Restore</h3>
                            <div class="settings-form">
                                <div class="form-group">
                                    <label>Backup Otomatis</label>
                                    <select class="form-control" id="backup-frequency">
                                        <option value="daily">Harian</option>
                                        <option value="weekly">Mingguan</option>
                                        <option value="monthly">Bulanan</option>
                                        <option value="manual">Manual</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label>Lokasi Backup</label>
                                    <select class="form-control" id="backup-location">
                                        <option value="local">Local Storage</option>
                                        <option value="google-drive">Google Drive</option>
                                        <option value="dropbox">Dropbox</option>
                                        <option value="s3">Amazon S3</option>
                                    </select>
                                </div>
                                <div style="display: flex; gap: 10px;">
                                    <button class="btn btn-primary" onclick="performBackup()">
                                        <i class="fas fa-download"></i> Backup Sekarang
                                    </button>
                                    <button class="btn btn-secondary" onclick="restoreBackup()">
                                        <i class="fas fa-upload"></i> Restore Backup
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal -->
    <div class="modal" id="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modal-title">Modal Title</h3>
                <button class="modal-close" onclick="closeModal()">&times;</button>
            </div>
            <div class="modal-body" id="modal-body">
                <!-- Modal content will be inserted here -->
            </div>
        </div>
    </div>

    <!-- Toast Notification -->
    <div class="toast" id="toast">
        <i class="fas fa-check-circle"></i>
        <span id="toast-message">Notifikasi</span>
    </div>

    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
    <script>
        // Global variables
        let selectedTruck = null;
        let map = null;
        let routeMap = null;
        let currentPage = 'tracking';

        // Sample data
        const trucks = [
            { 
                id: 'YR-34DFR734W2', 
                name: 'YR - 34DFR734W2', 
                type: 'Truk Besar',
                status: 'active', 
                capacity: 82, 
                driver: 'Ahmad S', 
                speed: 65, 
                distance: 245, 
                location: 'Cirebon',
                route: [
                    { id: 1, name: 'PT. Maju Jaya', address: 'Jakarta Pusat', status: 'completed', time: '08:00', details: 'Muat 20 koli' },
                    { id: 2, name: 'PT. Sukses Makmur', address: 'Jakarta Utara', status: 'completed', time: '10:30', details: 'Bongkar 15 koli' },
                    { id: 3, name: 'PT. Berkah Abadi', address: 'Bekasi', status: 'current', time: 'Est 13:00', details: 'Muat 25 koli' },
                    { id: 4, name: 'PT. Sentosa Jaya', address: 'Karawang', status: 'upcoming', time: 'Est 16:00', details: 'Bongkar semua' }
                ],
                history: [
                    { date: '10/06/2023', origin: 'Bandung', destination: 'Jakarta', status: 'completed' },
                    { date: '08/06/2023', origin: 'Jakarta', destination: 'Bandung', status: 'completed' },
                    { date: '05/06/2023', origin: 'Bogor', destination: 'Jakarta', status: 'completed' }
                ]
            },
            { 
                id: 'YR-56GHT876K3', 
                name: 'YR - 56GHT876K3', 
                type: 'Truk Sedang',
                status: 'active', 
                capacity: 45, 
                driver: 'Budi P', 
                speed: 72, 
                distance: 180, 
                location: 'Semarang',
                route: [
                    { id: 1, name: 'Gudang A', address: 'Surabaya', status: 'completed', time: '07:00', details: 'Muat 30 koli' },
                    { id: 2, name: 'Gudang B', address: 'Malang', status: 'current', time: 'Est 11:00', details: 'Bongkar 20 koli' },
                    { id: 3, name: 'Gudang C', address: 'Kediri', status: 'upcoming', time: 'Est 15:00', details: 'Muat 15 koli' }
                ],
                history: [
                    { date: '09/06/2023', origin: 'Semarang', destination: 'Surabaya', status: 'completed' },
                    { date: '07/06/2023', origin: 'Surabaya', destination: 'Semarang', status: 'completed' }
                ]
            },
            { 
                id: 'YR-78JUY543L9', 
                name: 'YR - 78JUY543L9', 
                type: 'Van',
                status: 'idle', 
                capacity: 0, 
                driver: 'Chandra W', 
                speed: 0, 
                distance: 0, 
                location: 'Jakarta',
                route: [],
                history: [
                    { date: '06/06/2023', origin: 'Jakarta', destination: 'Tangerang', status: 'completed' }
                ]
            },
            { 
                id: 'YR-90QWE234M5', 
                name: 'YR - 90QWE234M5', 
                type: 'Truk Besar',
                status: 'active', 
                capacity: 95, 
                driver: 'Dedi R', 
                speed: 58, 
                distance: 320, 
                location: 'Pekalongan',
                route: [
                    { id: 1, name: 'Depot 1', address: 'Semarang', status: 'completed', time: '06:00', details: 'Muat 40 koli' },
                    { id: 2, name: 'Depot 2', address: 'Pekalongan', status: 'current', time: 'Est 10:00', details: 'Bongkar 25 koli' },
                    { id: 3, name: 'Depot 3', address: 'Pemalang', status: 'upcoming', time: 'Est 14:00', details: 'Bongkar sisa' }
                ],
                history: [
                    { date: '11/06/2023', origin: 'Pekalongan', destination: 'Semarang', status: 'completed' },
                    { date: '09/06/2023', origin: 'Semarang', destination: 'Pekalongan', status: 'completed' }
                ]
            },
            { 
                id: 'YR-12ASD657N1', 
                name: 'YR - 12ASD657N1', 
                type: 'Truk Sedang',
                status: 'offline', 
                capacity: 0, 
                driver: 'Eko H', 
                speed: 0, 
                distance: 0, 
                location: 'Tidak Diketahui',
                route: [],
                history: []
            },
            { 
                id: 'YR-34ZXC890O3', 
                name: 'YR - 34ZXC890O3', 
                type: 'Van',
                status: 'active', 
                capacity: 67, 
                driver: 'Fajar S', 
                speed: 70, 
                distance: 150, 
                location: 'Tegal',
                route: [
                    { id: 1, name: 'Kantor A', address: 'Tegal', status: 'current', time: 'Est 12:00', details: 'Muat 10 koli' },
                    { id: 2, name: 'Kantor B', address: 'Pemalang', status: 'upcoming', time: 'Est 15:00', details: 'Bongkar semua' }
                ],
                history: [
                    { date: '10/06/2023', origin: 'Tegal', destination: 'Pemalang', status: 'completed' }
                ]
            },
            { 
                id: 'YR-56VBN456P7', 
                name: 'YR - 56VBN456P7', 
                type: 'Truk Besar',
                status: 'active', 
                capacity: 30, 
                driver: 'Gani A', 
                speed: 55, 
                distance: 90, 
                location: 'Cirebon',
                route: [
                    { id: 1, name: 'Pabrik X', address: 'Cirebon', status: 'current', time: 'Est 11:00', details: 'Muat 35 koli' },
                    { id: 2, name: 'Gudang Y', address: 'Indramayu', status: 'upcoming', time: 'Est 14:00', details: 'Bongkar semua' }
                ],
                history: [
                    { date: '09/06/2023', origin: 'Cirebon', destination: 'Indramayu', status: 'completed' }
                ]
            },
            { 
                id: 'YR-78HJK321Q9', 
                name: 'YR - 78HJK321Q9', 
                type: 'Truk Sedang',
                status: 'idle', 
                capacity: 0, 
                driver: 'Hadi M', 
                speed: 0, 
                distance: 0, 
                location: 'Surabaya',
                route: [],
                history: [
                    { date: '08/06/2023', origin: 'Surabaya', destination: 'Malang', status: 'completed' }
                ]
            }
        ];

        const drivers = [
            { id: 'DRV001', name: 'Ahmad Susanto', phone: '08123456789', email: 'ahmad@email.com', trips: 245, rating: 4.8, status: 'active', vehicle: 'YR-34DFR734W2' },
            { id: 'DRV002', name: 'Budi Pratama', phone: '08234567890', email: 'budi@email.com', trips: 189, rating: 4.6, status: 'active', vehicle: 'YR-56GHT876K3' },
            { id: 'DRV003', name: 'Chandra Wijaya', phone: '08345678901', email: 'chandra@email.com', trips: 312, rating: 4.9, status: 'active', vehicle: 'YR-78JUY543L9' },
            { id: 'DRV004', name: 'Dedi Rahman', phone: '08456789012', email: 'dedi@email.com', trips: 156, rating: 4.7, status: 'active', vehicle: 'YR-90QWE234M5' },
            { id: 'DRV005', name: 'Eko Hartono', phone: '08567890123', email: 'eko@email.com', trips: 98, rating: 4.5, status: 'idle', vehicle: 'YR-12ASD657N1' },
            { id: 'DRV006', name: 'Fajar Santoso', phone: '08678901234', email: 'fajar@email.com', trips: 134, rating: 4.6, status: 'active', vehicle: 'YR-34ZXC890O3' },
            { id: 'DRV007', name: 'Gani Andriani', phone: '08789012345', email: 'gani@email.com', trips: 201, rating: 4.8, status: 'active', vehicle: 'YR-56VBN456P7' },
            { id: 'DRV008', name: 'Hadi Mahmud', phone: '08890123456', email: 'hadi@email.com', trips: 178, rating: 4.7, status: 'idle', vehicle: 'YR-78HJK321Q9' }
        ];

        const routes = [
            { id: 1, name: 'Jakarta - Surabaya', origin: 'Jakarta', destination: 'Surabaya', vehicle: 'YR-34DFR734W2', status: 'active', distance: '720 km', estimatedTime: '8 jam' },
            { id: 2, name: 'Bandung - Yogyakarta', origin: 'Bandung', destination: 'Yogyakarta', vehicle: 'YR-56GHT876K3', status: 'active', distance: '410 km', estimatedTime: '5 jam' },
            { id: 3, name: 'Surabaya - Malang', origin: 'Surabaya', destination: 'Malang', vehicle: 'YR-90QWE234M5', status: 'waiting', distance: '95 km', estimatedTime: '3 jam' }
        ];

        const activities = [
            { icon: 'fa-check', color: 'success', title: 'Perjalanan Selesai', description: 'YR-34DFR734W2 tiba di Surabaya', time: '5 menit yang lalu' },
            { icon: 'fa-truck', color: 'blue', title: 'Kendaraan Berangkat', description: 'YR-56GHT876K3 menuju Bandung', time: '15 menit yang lalu' },
            { icon: 'fa-exclamation', color: 'orange', title: 'Peringatan Maintenance', description: 'YR-78JUY543L9 perlu servis', time: '1 jam yang lalu' },
            { icon: 'fa-user', color: 'purple', title: 'Pengemudi Baru', description: 'Rudi Santoso bergabung', time: '2 jam yang lalu' },
            { icon: 'fa-route', color: 'green', title: 'Rute Selesai', description: 'Jakarta - Bandung selesai', time: '3 jam yang lalu' }
        ];

        // Initialize the app
        document.addEventListener('DOMContentLoaded', function() {
            selectedTruck = trucks[0];
            initializeApp();
        });

        function initializeApp() {
            renderTruckList();
            initializeMaps();
            renderActivities();
            renderStepper(selectedTruck.route);
            updateTruckDetails(selectedTruck);
            setupEventListeners();
            
            // Initialize other pages
            renderVehicles();
            renderDrivers();
            renderRoutes();
            renderReports();
        }

        // Navigation
        function setupEventListeners() {
            document.querySelectorAll('.nav-item').forEach(item => {
                item.addEventListener('click', function() {
                    const page = this.dataset.page;
                    switchPage(page);
                });
            });
        }

        function switchPage(page) {
            // Update active nav
            document.querySelectorAll('.nav-item').forEach(i => i.classList.remove('active'));
            document.querySelector(`[data-page="${page}"]`).classList.add('active');
            
            // Update page title
            const titles = {
                'dashboard': 'Dashboard',
                'tracking': 'Tracking Kendaraan',
                'vehicles': 'Manajemen Kendaraan',
                'drivers': 'Manajemen Pengemudi',
                'routes': 'Manajemen Rute',
                'reports': 'Laporan & Analitik',
                'settings': 'Pengaturan Sistem'
            };
            document.getElementById('page-title').textContent = titles[page];
            
            // Show/hide pages
            document.querySelectorAll('.page-content').forEach(content => content.classList.remove('active'));
            document.getElementById(`${page}-page`).classList.add('active');
            
            currentPage = page;
            
            // Reinitialize components if needed
            if (page === 'tracking') {
                setTimeout(() => {
                    initializeMaps();
                }, 100);
            }
        }

        // Dashboard functions
        function updatePerformanceData(period) {
            const performanceData = {
                today: [
                    { value: '92%', label: 'Tingkat Keberhasilan', change: '+5%', icon: 'fa-check-circle', color: 'success' },
                    { value: '4.2 jam', label: 'Rata-rata Waktu Tempuh', change: '-15 menit', icon: 'fa-clock', color: 'blue' },
                    { value: '8.5 L/100km', label: 'Konsumsi BBM', change: '-0.3L', icon: 'fa-gas-pump', color: 'orange' },
                    { value: '4.8', label: 'Rating Pelanggan', change: '+0.2', icon: 'fa-users', color: 'purple' }
                ],
                week: [
                    { value: '89%', label: 'Tingkat Keberhasilan', change: '+3%', icon: 'fa-check-circle', color: 'success' },
                    { value: '4.5 jam', label: 'Rata-rata Waktu Tempuh', change: '-10 menit', icon: 'fa-clock', color: 'blue' },
                    { value: '8.8 L/100km', label: 'Konsumsi BBM', change: '-0.1L', icon: 'fa-gas-pump', color: 'orange' },
                    { value: '4.7', label: 'Rating Pelanggan', change: '+0.1', icon: 'fa-users', color: 'purple' }
                ],
                month: [
                    { value: '91%', label: 'Tingkat Keberhasilan', change: '+7%', icon: 'fa-check-circle', color: 'success' },
                    { value: '4.3 jam', label: 'Rata-rata Waktu Tempuh', change: '-20 menit', icon: 'fa-clock', color: 'blue' },
                    { value: '8.6 L/100km', label: 'Konsumsi BBM', change: '-0.5L', icon: 'fa-gas-pump', color: 'orange' },
                    { value: '4.9', label: 'Rating Pelanggan', change: '+0.3', icon: 'fa-users', color: 'purple' }
                ]
            };

            const data = performanceData[period];
            const container = document.getElementById('performance-data');
            
            container.innerHTML = data.map(item => {
                const changeType = item.change.startsWith('+') ? 'positive' : 'negative';
                const arrow = item.change.startsWith('+') ? 'fa-arrow-up' : 'fa-arrow-down';
                
                return `
                    <div class="performance-item">
                        <div class="performance-icon" style="background-color: rgba(${getColorByType(item.color)}, 0.1); color: var(--${item.color}-color);">
                            <i class="fas ${item.icon}"></i>
                        </div>
                        <div class="performance-info">
                            <div class="performance-value">${item.value}</div>
                            <div class="performance-label">${item.label}</div>
                            <div class="performance-change ${changeType}">
                                <i class="fas ${arrow}"></i> ${item.change.substring(1)} ${item.change.includes('menit') ? 'lebih cepat' : item.change.includes('L') ? 'lebih efisien' : 'dari ' + (period === 'today' ? 'kemarin' : period === 'week' ? 'minggu lalu' : 'bulan lalu')}
                            </div>
                        </div>
                    </div>
                `;
            }).join('');

            showToast(`Data diperbarui untuk periode ${period === 'today' ? 'hari ini' : period === 'week' ? 'minggu ini' : 'bulan ini'}`);
        }

        function getColorByType(color) {
            const colors = {
                success: '46, 204, 113',
                blue: '52, 152, 219',
                orange: '243, 156, 18',
                purple: '155, 89, 182'
            };
            return colors[color] || '149, 165, 166';
        }

        function renderActivities() {
            const container = document.getElementById('activity-list');
            if (!container) return;
            
            container.innerHTML = activities.map(activity => `
                <div class="activity-item">
                    <div class="activity-icon" style="background-color: rgba(${getColorByActivity(activity.color)}, 0.1); color: var(--${activity.color}-color);">
                        <i class="fas ${activity.icon}"></i>
                    </div>
                    <div class="activity-content">
                        <div class="activity-title">${activity.title}</div>
                        <div class="activity-time">${activity.description}</div>
                        <div class="activity-time">${activity.time}</div>
                    </div>
                </div>
            `).join('');
        }

        function getColorByActivity(color) {
            const colors = {
                success: '46, 204, 113',
                blue: '52, 152, 219',
                orange: '243, 156, 18',
                purple: '155, 89, 182',
                green: '46, 204, 113'
            };
            return colors[color] || '149, 165, 166';
        }

        // Tracking page functions
        function renderTruckList() {
            const container = document.getElementById('truck-list-container');
            if (!container) return;
            
            container.innerHTML = trucks.map(truck => {
                let statusClass = '';
                let statusText = '';

                switch(truck.status) {
                    case 'active':
                        statusClass = 'status-active';
                        statusText = 'Aktif';
                        break;
                    case 'idle':
                        statusClass = 'status-idle';
                        statusText = 'Diam';
                        break;
                    case 'offline':
                        statusClass = 'status-offline';
                        statusText = 'Offline';
                        break;
                }

                return `
                    <div class="truck-item ${truck.id === selectedTruck.id ? 'active' : ''}" onclick="selectTruck('${truck.id}')">
                        <div class="truck-info">
                            <h3>${truck.name}</h3>
                            <div class="truck-details">
                                <span><i class="fas fa-user"></i> ${truck.driver}</span>
                                <span><i class="fas fa-map-marker-alt"></i> ${truck.location}</span>
                            </div>
                        </div>
                        <div class="truck-status">
                            <span class="status-badge ${statusClass}">${statusText}</span>
                            <div class="capacity-indicator">
                                <div class="capacity-bar" style="width: ${truck.capacity}%"></div>
                            </div>
                            <span style="font-size: 12px; margin-top: 5px;">${truck.capacity}% Kapasitas</span>
                        </div>
                    </div>
                `;
            }).join('');
        }

        function selectTruck(truckId) {
            selectedTruck = trucks.find(t => t.id === truckId);
            updateTruckDetails(selectedTruck);
            renderStepper(selectedTruck.route);
            renderHistory(selectedTruck.history);
            
            // Update active state
            document.querySelectorAll('.truck-item').forEach(item => item.classList.remove('active'));
            event.currentTarget.classList.add('active');
        }

        function searchTrucks(searchTerm) {
            const items = document.querySelectorAll('.truck-item');
            items.forEach(item => {
                const text = item.textContent.toLowerCase();
                if (text.includes(searchTerm.toLowerCase())) {
                    item.style.display = 'flex';
                } else {
                    item.style.display = 'none';
                }
            });
        }

        function updateTruckDetails(truck) {
            document.getElementById('selected-truck-name').textContent = truck.name;
            document.getElementById('current-capacity').textContent = `${truck.capacity}%`;
            document.getElementById('current-speed').textContent = `${truck.speed} km/h`;
            document.getElementById('current-distance').textContent = `${truck.distance} km`;
            
            let statusText = '';
            switch(truck.status) {
                case 'active':
                    statusText = 'Aktif';
                    break;
                case 'idle':
                    statusText = 'Diam';
                    break;
                case 'offline':
                    statusText = 'Offline';
                    break;
            }
            
            document.getElementById('current-status').textContent = statusText;
            
            // Update map marker
            if (map) {
                map.eachLayer(layer => {
                    if (layer instanceof L.Marker) {
                        map.removeLayer(layer);
                    }
                });
                
                const coords = getCoordinatesByLocation(truck.location);
                const marker = L.marker(coords).addTo(map);
                marker.bindPopup(`<b>${truck.name}</b><br>Lokasi: ${truck.location}`).openPopup();
                map.setView(coords, 8);
            }
        }

        function getCoordinatesByLocation(location) {
            const locations = {
                'Jakarta': [-6.2088, 106.8456],
                'Cirebon': [-6.7149, 108.5666],
                'Semarang': [-6.9667, 110.4167],
                'Pekalongan': [-6.8888, 109.6756],
                'Tegal': [-6.8772, 109.1333],
                'Surabaya': [-7.2575, 112.7521],
                'Tidak Diketahui': [-6.2088, 106.8456]
            };
            return locations[location] || locations['Tidak Diketahui'];
        }

        function renderStepper(route) {
            const container = document.getElementById('stepper-steps');
            if (!container) return;
            
            if (!route || route.length === 0) {
                container.innerHTML = '<p style="text-align: center; color: var(--text-secondary);">Tidak ada rute yang aktif</p>';
                document.getElementById('progress-text').textContent = 'Tidak ada perjalanan aktif';
                document.getElementById('progress-bar').style.width = '0%';
                return;
            }

            const completedCount = route.filter(r => r.status === 'completed').length;
            const totalCount = route.length;
            const progressPercentage = (completedCount / totalCount) * 100;

            document.getElementById('progress-text').textContent = `${completedCount} dari ${totalCount} tujuan selesai`;
            document.getElementById('progress-bar').style.width = `${progressPercentage}%`;

            container.innerHTML = route.map(step => {
                let iconClass = '';
                let icon = '';
                
                switch(step.status) {
                    case 'completed':
                        iconClass = 'completed';
                        icon = 'fas fa-check';
                        break;
                    case 'current':
                        iconClass = 'current';
                        icon = 'fas fa-truck';
                        break;
                    case 'upcoming':
                        iconClass = 'upcoming';
                        icon = 'fas fa-map-marker-alt';
                        break;
                }

                return `
                    <div class="step" onclick="showStepDetails('${step.name}', '${step.details}')">
                        <div class="step-icon ${iconClass}">
                            <i class="${icon}"></i>
                        </div>
                        <div class="step-title">${step.name}</div>
                        <div class="step-subtitle">${step.address}</div>
                        <div class="step-time">
                            <i class="fas fa-clock"></i>
                            <span>${step.time}</span>
                        </div>
                        <div class="step-details">${step.details}</div>
                    </div>
                `;
            }).join('');
        }

        function renderHistory(history) {
            const tbody = document.getElementById('history-tbody');
            if (!tbody) return;
            
            tbody.innerHTML = history.map(item => `
                <tr style="border-bottom: 1px solid var(--border-color);">
                    <td style="padding: 10px;">${item.date}</td>
                    <td style="padding: 10px;">${item.origin}</td>
                    <td style="padding: 10px;">${item.destination}</td>
                    <td style="padding: 10px;"><span class="status-badge status-active">Selesai</span></td>
                </tr>
            `).join('');
        }

        function switchTab(tabName) {
            document.querySelectorAll('.tab').forEach(tab => tab.classList.remove('active'));
            document.querySelector(`[data-tab="${tabName}"]`).classList.add('active');
            
            document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
            document.getElementById(tabName).classList.add('active');
            
            if (tabName === 'route') {
                setTimeout(() => {
                    initializeRouteMap();
                }, 100);
            }
        }

        function initializeMaps() {
            if (document.getElementById('map')) {
                map = L.map('map').setView([-6.2088, 106.8456], 6);
                L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                    attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
                }).addTo(map);

                const coords = getCoordinatesByLocation(selectedTruck.location);
                const marker = L.marker(coords).addTo(map);
                marker.bindPopup(`<b>${selectedTruck.name}</b><br>Lokasi: ${selectedTruck.location}`).openPopup();
                map.setView(coords, 8);
            }
        }

        function initializeRouteMap() {
            if (document.getElementById('route-map')) {
                routeMap = L.map('route-map').setView([-6.2088, 106.8456], 6);
                L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                    attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
                }).addTo(routeMap);

                const routeCoordinates = [
                    [-6.2088, 106.8456], // Jakarta
                    [-6.7149, 108.5666], // Cirebon
                    [-6.9667, 110.4167], // Semarang
                    [-7.2575, 112.7521]  // Surabaya
                ];

                const routeLine = L.polyline(routeCoordinates, {color: 'blue'}).addTo(routeMap);
                routeMap.fitBounds(routeLine.getBounds());

                L.marker([-6.2088, 106.8456]).addTo(routeMap).bindPopup('Jakarta (Asal)');
                L.marker([-7.2575, 112.7521]).addTo(routeMap).bindPopup('Surabaya (Tujuan)');
            }
        }

        // Vehicles page functions
        function renderVehicles() {
            const tbody = document.getElementById('vehicles-tbody');
            if (!tbody) return;
            
            tbody.innerHTML = trucks.map(truck => {
                let statusClass = '';
                let statusText = '';

                switch(truck.status) {
                    case 'active':
                        statusClass = 'status-active';
                        statusText = 'Aktif';
                        break;
                    case 'idle':
                        statusClass = 'status-idle';
                        statusText = 'Diam';
                        break;
                    case 'offline':
                        statusClass = 'status-offline';
                        statusText = 'Offline';
                        break;
                }

                return `
                    <tr>
                        <td>${truck.name}</td>
                        <td>${truck.type}</td>
                        <td>${truck.driver}</td>
                        <td><span class="status-badge ${statusClass}">${statusText}</span></td>
                        <td>${truck.capacity}%</td>
                        <td>${truck.location}</td>
                        <td>
                            <div class="vehicle-actions">
                                <button class="btn btn-sm btn-secondary" onclick="viewVehicleDetails('${truck.id}')"><i class="fas fa-eye"></i></button>
                                <button class="btn btn-sm btn-secondary" onclick="editVehicle('${truck.id}')"><i class="fas fa-edit"></i></button>
                            </div>
                        </td>
                    </tr>
                `;
            }).join('');
        }

        function filterVehicles() {
            const statusFilter = document.getElementById('vehicle-status-filter').value;
            const typeFilter = document.getElementById('vehicle-type-filter').value;
            const searchTerm = event.target.value.toLowerCase();
            
            const filteredTrucks = trucks.filter(truck => {
                const statusMatch = !statusFilter || truck.status === statusFilter;
                const typeMatch = !typeFilter || truck.type === typeFilter;
                const searchMatch = !searchTerm || 
                    truck.name.toLowerCase().includes(searchTerm) ||
                    truck.driver.toLowerCase().includes(searchTerm) ||
                    truck.location.toLowerCase().includes(searchTerm);
                
                return statusMatch && typeMatch && searchMatch;
            });
            
            const tbody = document.getElementById('vehicles-tbody');
            tbody.innerHTML = filteredTrucks.map(truck => {
                let statusClass = '';
                let statusText = '';

                switch(truck.status) {
                    case 'active':
                        statusClass = 'status-active';
                        statusText = 'Aktif';
                        break;
                    case 'idle':
                        statusClass = 'status-idle';
                        statusText = 'Diam';
                        break;
                    case 'offline':
                        statusClass = 'status-offline';
                        statusText = 'Offline';
                        break;
                }

                return `
                    <tr>
                        <td>${truck.name}</td>
                        <td>${truck.type}</td>
                        <td>${truck.driver}</td>
                        <td><span class="status-badge ${statusClass}">${statusText}</span></td>
                        <td>${truck.capacity}%</td>
                        <td>${truck.location}</td>
                        <td>
                            <div class="vehicle-actions">
                                <button class="btn btn-sm btn-secondary" onclick="viewVehicleDetails('${truck.id}')"><i class="fas fa-eye"></i></button>
                                <button class="btn btn-sm btn-secondary" onclick="editVehicle('${truck.id}')"><i class="fas fa-edit"></i></button>
                            </div>
                        </td>
                    </tr>
                `;
            }).join('');
        }

        function showAddVehicleModal() {
            const modalBody = `
                <div class="route-form">
                    <div class="form-group">
                        <label>ID Kendaraan</label>
                        <input type="text" class="form-control" id="new-vehicle-id" placeholder="Masukkan ID kendaraan">
                    </div>
                    <div class="form-group">
                        <label>Tipe Kendaraan</label>
                        <select class="form-control" id="new-vehicle-type">
                            <option value="">Pilih tipe</option>
                            <option value="Truk Besar">Truk Besar</option>
                            <option value="Truk Sedang">Truk Sedang</option>
                            <option value="Van">Van</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Pengemudi</label>
                        <select class="form-control" id="new-vehicle-driver">
                            <option value="">Pilih pengemudi</option>
                            ${drivers.filter(d => !d.vehicle).map(d => `<option value="${d.id}">${d.name}</option>`).join('')}
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Nomor Polisi</label>
                        <input type="text" class="form-control" id="new-vehicle-plate" placeholder="Masukkan nomor polisi">
                    </div>
                    <button class="btn btn-primary" onclick="addVehicle()">Tambah Kendaraan</button>
                </div>
            `;
            
            showModal('Tambah Kendaraan Baru', modalBody);
        }

        function addVehicle() {
            const id = document.getElementById('new-vehicle-id').value;
            const type = document.getElementById('new-vehicle-type').value;
            const driverId = document.getElementById('new-vehicle-driver').value;
            const plate = document.getElementById('new-vehicle-plate').value;
            
            if (!id || !type || !driverId || !plate) {
                showToast('Mohon lengkapi semua field');
                return;
            }
            
            const driver = drivers.find(d => d.id === driverId);
            const newTruck = {
                id: id,
                name: id,
                type: type,
                status: 'idle',
                capacity: 0,
                driver: driver.name,
                speed: 0,
                distance: 0,
                location: 'Jakarta',
                route: [],
                history: []
            };
            
            trucks.push(newTruck);
            driver.vehicle = id;
            
            renderVehicles();
            renderTruckList();
            closeModal();
            showToast('Kendaraan berhasil ditambahkan');
        }

        function viewVehicleDetails(vehicleId) {
            const truck = trucks.find(t => t.id === vehicleId);
            switchPage('tracking');
            selectTruck(vehicleId);
            showToast(`Melihat detail ${truck.name}`);
        }

        function editVehicle(vehicleId) {
            const truck = trucks.find(t => t.id === vehicleId);
            showToast(`Mengedit ${truck.name}`);
        }

        // Drivers page functions
        function renderDrivers() {
            const grid = document.getElementById('drivers-grid');
            if (!grid) return;
            
            grid.innerHTML = drivers.map(driver => {
                const initials = driver.name.split(' ').map(n => n[0]).join('');
                const statusClass = driver.status === 'active' ? 'status-active' : 'status-idle';
                const statusText = driver.status === 'active' ? 'Aktif' : 'Tidak Aktif';
                
                return `
                    <div class="driver-card">
                        <div class="driver-header">
                            <div class="driver-avatar">${initials}</div>
                            <div class="driver-info">
                                <h3>${driver.name}</h3>
                                <p>ID: ${driver.id}</p>
                            </div>
                        </div>
                        <div class="driver-stats">
                            <div class="driver-stat">
                                <div class="driver-stat-value">${driver.trips}</div>
                                <div class="driver-stat-label">Total Perjalanan</div>
                            </div>
                            <div class="driver-stat">
                                <div class="driver-stat-value">${driver.rating}</div>
                                <div class="driver-stat-label">Rating</div>
                            </div>
                        </div>
                        <div class="driver-actions">
                            <button class="btn btn-sm btn-secondary" onclick="viewDriverDetails('${driver.id}')">Lihat Detail</button>
                            <button class="btn btn-sm btn-primary" onclick="contactDriverById('${driver.id}')">Hubungi</button>
                        </div>
                    </div>
                `;
            }).join('');
        }

        function showAddDriverModal() {
            const modalBody = `
                <div class="route-form">
                    <div class="form-group">
                        <label>Nama Lengkap</label>
                        <input type="text" class="form-control" id="new-driver-name" placeholder="Masukkan nama lengkap">
                    </div>
                    <div class="form-group">
                        <label>Nomor Telepon</label>
                        <input type="tel" class="form-control" id="new-driver-phone" placeholder="Masukkan nomor telepon">
                    </div>
                    <div class="form-group">
                        <label>Email</label>
                        <input type="email" class="form-control" id="new-driver-email" placeholder="Masukkan email">
                    </div>
                    <div class="form-group">
                        <label>Nomor SIM</label>
                        <input type="text" class="form-control" id="new-driver-sim" placeholder="Masukkan nomor SIM">
                    </div>
                    <button class="btn btn-primary" onclick="addDriver()">Tambah Pengemudi</button>
                </div>
            `;
            
            showModal('Tambah Pengemudi Baru', modalBody);
        }

        function addDriver() {
            const name = document.getElementById('new-driver-name').value;
            const phone = document.getElementById('new-driver-phone').value;
            const email = document.getElementById('new-driver-email').value;
            const sim = document.getElementById('new-driver-sim').value;
            
            if (!name || !phone || !email || !sim) {
                showToast('Mohon lengkapi semua field');
                return;
            }
            
            const newDriver = {
                id: `DRV${String(drivers.length + 1).padStart(3, '0')}`,
                name: name,
                phone: phone,
                email: email,
                trips: 0,
                rating: 0,
                status: 'idle',
                vehicle: null
            };
            
            drivers.push(newDriver);
            renderDrivers();
            closeModal();
            showToast('Pengemudi berhasil ditambahkan');
        }

        function viewDriverDetails(driverId) {
            const driver = drivers.find(d => d.id === driverId);
            const modalBody = `
                <div style="display: flex; flex-direction: column; gap: 15px;">
                    <div style="text-align: center;">
                        <div style="width: 80px; height: 80px; border-radius: 50%; background-color: var(--secondary-color); display: flex; align-items: center; justify-content: center; color: white; font-size: 32px; margin: 0 auto;">
                            ${driver.name.split(' ').map(n => n[0]).join('')}
                        </div>
                        <h3 style="margin-top: 10px;">${driver.name}</h3>
                        <p style="color: var(--text-secondary);">ID: ${driver.id}</p>
                    </div>
                    <div>
                        <p><strong>Nomor Telepon:</strong> ${driver.phone}</p>
                        <p><strong>Email:</strong> ${driver.email}</p>
                        <p><strong>Total Perjalanan:</strong> ${driver.trips}</p>
                        <p><strong>Rating:</strong> ${driver.rating}</p>
                        <p><strong>Status:</strong> <span class="status-badge ${driver.status === 'active' ? 'status-active' : 'status-idle'}">${driver.status === 'active' ? 'Aktif' : 'Tidak Aktif'}</span></p>
                        <p><strong>Kendaraan:</strong> ${driver.vehicle || 'Tidak ada'}</p>
                    </div>
                </div>
            `;
            
            showModal('Detail Pengemudi', modalBody);
        }

        function contactDriverById(driverId) {
            const driver = drivers.find(d => d.id === driverId);
            showToast(`Menghubungi ${driver.name} di ${driver.phone}`);
        }

        // Routes page functions
        function renderRoutes() {
            const container = document.getElementById('active-routes');
            const vehicleSelect = document.getElementById('route-vehicle');
            
            if (container) {
                container.innerHTML = routes.map(route => {
                    const statusClass = route.status === 'active' ? 'status-active' : 'status-idle';
                    const statusText = route.status === 'active' ? 'Aktif' : 'Menunggu';
                    
                    return `
                        <div class="route-item">
                            <div class="route-info">
                                <h4>${route.name}</h4>
                                <div class="route-details">
                                    <p>Kendaraan: ${route.vehicle}</p>
                                    <p>Estimasi: ${route.estimatedTime}</p>
                                    <p>Jarak: ${route.distance}</p>
                                </div>
                            </div>
                            <div>
                                <span class="status-badge ${statusClass}">${statusText}</span>
                            </div>
                        </div>
                    `;
                }).join('');
            }
            
            if (vehicleSelect) {
                vehicleSelect.innerHTML = '<option value="">Pilih Kendaraan</option>' +
                    trucks.filter(t => t.status === 'idle').map(t => `<option value="${t.id}">${t.name}</option>`).join('');
            }
        }

        function createRoute() {
            const name = document.getElementById('route-name').value;
            const origin = document.getElementById('route-origin').value;
            const destination = document.getElementById('route-destination').value;
            const vehicle = document.getElementById('route-vehicle').value;
            
            if (!name || !origin || !destination || !vehicle) {
                showToast('Mohon lengkapi semua field');
                return;
            }
            
            const newRoute = {
                id: routes.length + 1,
                name: name,
                origin: origin,
                destination: destination,
                vehicle: vehicle,
                status: 'waiting',
                distance: Math.floor(Math.random() * 500) + 100 + ' km',
                estimatedTime: Math.floor(Math.random() * 8) + 2 + ' jam'
            };
            
            routes.push(newRoute);
            renderRoutes();
            
            // Clear form
            document.getElementById('route-name').value = '';
            document.getElementById('route-origin').value = '';
            document.getElementById('route-destination').value = '';
            document.getElementById('route-vehicle').value = '';
            
            showToast('Rute berhasil dibuat');
        }

        function showAddRouteModal() {
            const modalBody = `
                <div class="route-form">
                    <div class="form-group">
                        <label>Nama Rute</label>
                        <input type="text" class="form-control" placeholder="Masukkan nama rute">
                    </div>
                    <div class="form-group">
                        <label>Lokasi Asal</label>
                        <input type="text" class="form-control" placeholder="Masukkan lokasi asal">
                    </div>
                    <div class="form-group">
                        <label>Lokasi Tujuan</label>
                        <input type="text" class="form-control" placeholder="Masukkan lokasi tujuan">
                    </div>
                    <div class="form-group">
                        <label>Kendaraan</label>
                        <select class="form-control">
                            <option value="">Pilih Kendaraan</option>
                            ${trucks.filter(t => t.status === 'idle').map(t => `<option value="${t.id}">${t.name}</option>`).join('')}
                        </select>
                    </div>
                    <button class="btn btn-primary">Buat Rute</button>
                </div>
            `;
            
            showModal('Buat Rute Baru', modalBody);
        }

        // Reports page functions
        function renderReports() {
            // Trip reports
            const tripReportsTbody = document.getElementById('trip-reports-tbody');
            if (tripReportsTbody) {
                const tripData = [
                    { month: 'Januari', trips: 145, distance: '12,450', efficiency: '87%' },
                    { month: 'Februari', trips: 162, distance: '14,230', efficiency: '89%' },
                    { month: 'Maret', trips: 178, distance: '15,670', efficiency: '91%' }
                ];
                
                tripReportsTbody.innerHTML = tripData.map(data => `
                    <tr>
                        <td>${data.month}</td>
                        <td>${data.trips}</td>
                        <td>${data.distance}</td>
                        <td>${data.efficiency}</td>
                    </tr>
                `).join('');
            }
            
            // Driver reports
            const driverReportsTbody = document.getElementById('driver-reports-tbody');
            if (driverReportsTbody) {
                const topDrivers = drivers.slice(0, 3);
                driverReportsTbody.innerHTML = topDrivers.map(driver => `
                    <tr>
                        <td>${driver.name}</td>
                        <td>${driver.trips}</td>
                        <td>${driver.rating}</td>
                        <td><span class="status-badge ${driver.status === 'active' ? 'status-active' : 'status-idle'}">${driver.status === 'active' ? 'Aktif' : 'Tidak Aktif'}</span></td>
                    </tr>
                `).join('');
            }
            
            // Maintenance reports
            const maintenanceReportsTbody = document.getElementById('maintenance-reports-tbody');
            if (maintenanceReportsTbody) {
                const maintenanceData = [
                    { vehicle: 'YR-34DFR734W2', lastService: '15/05/2023', nextService: '5,000 km', status: 'OK' },
                    { vehicle: 'YR-56GHT876K3', lastService: '10/04/2023', nextService: '500 km', status: 'Perlu Servis' },
                    { vehicle: 'YR-78JUY543L9', lastService: '20/05/2023', nextService: '8,000 km', status: 'OK' }
                ];
                
                maintenanceReportsTbody.innerHTML = maintenanceData.map(data => `
                    <tr>
                        <td>${data.vehicle}</td>
                        <td>${data.lastService}</td>
                        <td>${data.nextService}</td>
                        <td><span class="status-badge ${data.status === 'OK' ? 'status-active' : 'status-idle'}">${data.status}</span></td>
                    </tr>
                `).join('');
            }
            
            // Finance reports
            const financeReportsTbody = document.getElementById('finance-reports-tbody');
            if (financeReportsTbody) {
                const financeData = [
                    { category: 'Pendapatan', current: 'Rp 450M', last: 'Rp 420M', change: '+7.1%', positive: true },
                    { category: 'Bahan Bakar', current: 'Rp 85M', last: 'Rp 82M', change: '+3.7%', positive: false },
                    { category: 'Maintenance', current: 'Rp 25M', last: 'Rp 30M', change: '-16.7%', positive: true }
                ];
                
                financeReportsTbody.innerHTML = financeData.map(data => `
                    <tr>
                        <td>${data.category}</td>
                        <td>${data.current}</td>
                        <td>${data.last}</td>
                        <td style="color: ${data.positive ? 'var(--success-color)' : 'var(--accent-color)'}">${data.change}</td>
                    </tr>
                `).join('');
            }
        }

        function filterReports() {
            const startDate = document.getElementById('report-start-date').value;
            const endDate = document.getElementById('report-end-date').value;
            
            if (!startDate || !endDate) {
                showToast('Mohon pilih tanggal mulai dan akhir');
                return;
            }
            
            showToast(`Menampilkan laporan dari ${startDate} sampai ${endDate}`);
            // Here you would typically fetch filtered data from the server
        }

        function exportReports() {
            showToast('Mengekspor laporan...');
            // Simulate export
            setTimeout(() => {
                showToast('Laporan berhasil diekspor');
            }, 2000);
        }

        // Settings page functions
        function switchSettingsSection(section) {
            document.querySelectorAll('.settings-nav-item').forEach(item => item.classList.remove('active'));
            document.querySelector(`[data-section="${section}"]`).classList.add('active');
            
            document.querySelectorAll('.settings-section').forEach(sec => sec.classList.remove('active'));
            document.getElementById(section).classList.add('active');
        }

        function toggleSwitch(element) {
            element.classList.toggle('active');
        }

        function saveGeneralSettings() {
            const companyName = document.getElementById('company-name').value;
            const companyEmail = document.getElementById('company-email').value;
            const companyPhone = document.getElementById('company-phone').value;
            const language = document.getElementById('language').value;
            const timezone = document.getElementById('timezone').value;
            
            // Here you would save these settings to the server
            showToast('Pengaturan umum berhasil disimpan');
        }

        function saveNotificationSettings() {
            const switches = document.querySelectorAll('#notifications .toggle-switch');
            const settings = {};
            
            switches.forEach(sw => {
                const label = sw.previousElementSibling.querySelector('label').textContent;
                settings[label] = sw.classList.contains('active');
            });
            
            showToast('Pengaturan notifikasi berhasil disimpan');
        }

        function updatePassword() {
            const currentPassword = document.getElementById('current-password').value;
            const newPassword = document.getElementById('new-password').value;
            const confirmPassword = document.getElementById('confirm-password').value;
            
            if (!currentPassword || !newPassword || !confirmPassword) {
                showToast('Mohon lengkapi semua field');
                return;
            }
            
            if (newPassword !== confirmPassword) {
                showToast('Password baru tidak cocok');
                return;
            }
            
            if (newPassword.length < 6) {
                showToast('Password minimal 6 karakter');
                return;
            }
            
            // Here you would update the password on the server
            showToast('Password berhasil diperbarui');
            
            // Clear fields
            document.getElementById('current-password').value = '';
            document.getElementById('new-password').value = '';
            document.getElementById('confirm-password').value = '';
        }

        function saveIntegrations() {
            const googleMapsApi = document.getElementById('google-maps-api').value;
            const whatsappApi = document.getElementById('whatsapp-api').value;
            const paymentGateway = document.getElementById('payment-gateway').value;
            
            showToast('Integrasi berhasil disimpan');
        }

        function performBackup() {
            showToast('Memulai backup...');
            setTimeout(() => {
                showToast('Backup berhasil diselesaikan');
            }, 2000);
        }

        function restoreBackup() {
            showToast('Memulai restore backup...');
            setTimeout(() => {
                showToast('Backup berhasil direstore');
            }, 2000);
        }

        // Utility functions
        function showModal(title, body) {
            document.getElementById('modal-title').textContent = title;
            document.getElementById('modal-body').innerHTML = body;
            document.getElementById('modal').style.display = 'flex';
        }

        function closeModal() {
            document.getElementById('modal').style.display = 'none';
        }

        function showToast(message) {
            const toast = document.getElementById('toast');
            document.getElementById('toast-message').textContent = message;
            
            toast.classList.add('show');
            
            setTimeout(() => {
                toast.classList.remove('show');
            }, 3000);
        }

        function showNotifications() {
            const modalBody = `
                <div style="display: flex; flex-direction: column; gap: 15px;">
                    <div class="activity-item">
                        <div class="activity-icon" style="background-color: rgba(46, 204, 113, 0.1); color: var(--success-color);">
                            <i class="fas fa-check"></i>
                        </div>
                        <div class="activity-content">
                            <div class="activity-title">Perjalanan Selesai</div>
                            <div class="activity-time">YR-34DFR734W2 tiba di Surabaya</div>
                            <div class="activity-time">5 menit yang lalu</div>
                        </div>
                    </div>
                    <div class="activity-item">
                        <div class="activity-icon" style="background-color: rgba(243, 156, 18, 0.1); color: var(--warning-color);">
                            <i class="fas fa-exclamation"></i>
                        </div>
                        <div class="activity-content">
                            <div class="activity-title">Peringatan Maintenance</div>
                            <div class="activity-time">YR-78JUY543L9 perlu servis</div>
                            <div class="activity-time">1 jam yang lalu</div>
                        </div>
                    </div>
                    <div class="activity-item">
                        <div class="activity-icon" style="background-color: rgba(231, 76, 60, 0.1); color: var(--accent-color);">
                            <i class="fas fa-route"></i>
                        </div>
                        <div class="activity-content">
                            <div class="activity-title">Rute Terhambat</div>
                            <div class="activity-time">Jakarta - Bandung macet</div>
                            <div class="activity-time">2 jam yang lalu</div>
                        </div>
                    </div>
                </div>
            `;
            
            showModal('Notifikasi', modalBody);
        }

        function showUserMenu() {
            const modalBody = `
                <div style="display: flex; flex-direction: column; gap: 15px;">
                    <div style="text-align: center; padding: 20px;">
                        <div class="user-avatar" style="width: 60px; height: 60px; margin: 0 auto;">AD</div>
                        <h3 style="margin-top: 10px;">Admin User</h3>
                        <p style="color: var(--text-secondary);">admin@fleettrack.id</p>
                    </div>
                    <div style="border-top: 1px solid var(--border-color); padding-top: 15px;">
                        <button class="btn btn-secondary" style="width: 100%; margin-bottom: 10px;" onclick="showToast('Membuka profil')">
                            <i class="fas fa-user"></i> Profil Saya
                        </button>
                        <button class="btn btn-secondary" style="width: 100%; margin-bottom: 10px;" onclick="showToast('Membuka pengaturan')">
                            <i class="fas fa-cog"></i> Pengaturan
                        </button>
                        <button class="btn btn-danger" style="width: 100%;" onclick="showToast('Logout berhasil')">
                            <i class="fas fa-sign-out-alt"></i> Keluar
                        </button>
                    </div>
                </div>
            `;
            
            showModal('Profil Pengguna', modalBody);
        }

        function showPhotoModal(photoId, date, location) {
            const modalBody = `
                <div>
                    <img src="https://picsum.photos/seed/${photoId}/600/400.jpg" alt="Cargo Photo" style="width: 100%; border-radius: 8px; margin-bottom: 15px;">
                    <div>
                        <p><strong>Tanggal:</strong> ${date}</p>
                        <p><strong>Lokasi:</strong> ${location}</p>
                        <p><strong>Keterangan:</strong> Foto kargo saat pengiriman. Semua barang dalam kondisi baik dan aman.</p>
                    </div>
                </div>
            `;
            
            showModal('Detail Foto Kargo', modalBody);
        }

        function showStepDetails(stepName, details) {
            showToast(`${stepName}: ${details}`);
        }

        function downloadReport() {
            showToast('Mengunduh laporan kendaraan...');
            setTimeout(() => {
                showToast('Laporan berhasil diunduh');
            }, 2000);
        }

        function contactDriver() {
            if (selectedTruck) {
                const driver = drivers.find(d => d.name === selectedTruck.driver);
                if (driver) {
                    showToast(`Menghubungi ${driver.name} di ${driver.phone}`);
                }
            }
        }

        // Close modal when clicking outside
        document.getElementById('modal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeModal();
            }
        });
    </script>
</body>
</html>
